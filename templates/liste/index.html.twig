{% extends 'base.html.twig' %}

{% block title %}Liste{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<div class="example-wrapper">
    <h1 style="text-align: center">Liste des sorties programmées </h1>
    <table class="border" style="text-align: center">
        <thead>
        <tr style="border: solid; ">
            <th style="border: solid; text-align: center" style="border: solid;" colspan="1">Nom de la sortie</th>
            <th style="border: solid; text-align: center" colspan="1">Date de la sortie</th>
            <th style="border: solid; text-align: center" colspan="1">Cloture</th>
            <th style="border: solid; text-align: center" colspan="1">inscrits/places</th>
            <th style="border: solid; text-align: center" colspan="1">Etat</th>
            <th style="border: solid; text-align: center" colspan="1">Inscrit</th>
            <th style="border: solid; text-align: center" colspan="1">Organisateur</th>
            <th style="border: solid; text-align: center" colspan="2">Actions</th>
        </tr>
        </thead>
        <tbody>
        {% for sortie in liste %}
            <tr>
                <td style="border: solid;">{{ sortie.nom }}</td>
                <td style="border: solid;">{{ sortie.datedebut|date('d/m/Y H:i') }}</td>
                <td style="border: solid;">{{ sortie.dateLimiteInscription|date('d/m/Y H:i') }}</td>
                <td style="border: solid;">{{ sortie.participants|length~"/"~sortie.nbinscriptionsmax }}</td>
                <td style="border: solid;">{{ sortie.etatsortie }}</td>
                <td style="border: solid;">
                    {% if app.user in sortie.participants %}
                        X
                    {% endif %}
                </td>
                <td style="border: solid;">{{ sortie.organisateur.username }}</td>
                {% if app.user in sortie.participants %}
                    <td style="border: solid;"><a href="/sedesister/{{sortie.id}}">Se désister</a></td>
                {% else %}
                <td style="border: solid;"><a href="/participer/{{sortie.id}}">S'inscrire</a></td>
                {% endif %}
                <td style="border: solid;"><a>Afficher</a></td>
            </tr>
        {% endfor %}

        </tbody>
    </table>

</div>
{% endblock %}
